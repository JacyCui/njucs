# Chapter 06 时序逻辑电路



**崔家才 201220014**



## 1 时序逻辑电路概述

### 1.1 时序逻辑与有限状态机

**时序逻辑电路**：结果输出不仅取决于当前的外部输入，还取决于系统所处的内部状态。

**有限状态机(Finite State Machine, FSM)**：刻画状态及状态转化的理论工具，常用状态图描述有限状态机。

### 1.2 时序逻辑电路的基本结构

- 状态记忆模块
  - **同步时序逻辑电路**：状态记忆单元在统一的时钟信号控制下进行状态转换
  - **异步时序逻辑电路**：状态记忆单元没有统一的时钟信号来控制其状态改变
- 次态激励逻辑模块F
  - **激励函数**：次态激励逻辑模块对应的函数，是一个组合逻辑
- 输出逻辑模块G
  - **输出函数**：输出模块对应的函数，是组合逻辑
  - **Mealy型电路**：输出逻辑不仅依赖于当前的状态，同时还依赖当前的输入
  - **Moore型电路**：输出逻辑仅依赖当前状态，和当前输入无关

### 1.3 时序逻辑电路的定时

**时钟信号**：用于触发时序逻辑电路中状态的转换

**时钟周期**：由高电平和低电平两部分组成，时钟周期的倒数称为**时钟频率**

时序逻辑电路的状态转换多采用时钟边沿触发方式，分为**上升沿触发**和**下降沿触发**。



## 2 锁存器和触发器

**双稳态元件**：两个非门串联后输出再反馈到输入端，Q高电平时为置位状态，~Q为高电平时为复位状态

**SR锁存器**：使用一对交叉耦合的或非门构成的储存元件，也称为**置位-复位锁存器**，S是置位(set)输入端，R是复位(reset)输入端。当仅S为1时，Q一定为1；当仅R为1时，Q一定为0；当S和Q都为1时，Q和~Q都为0，是一个禁止状态；当S和Q都为0时，保持原先状态不变，如果原先是禁止状态，则此时状态未知

**触发延迟/锁存延迟**：从输入驱动信号有效开始，到输出达到稳定为止的延时

**D锁存器**：C为使能信号，D为唯一的状态驱动信号。当C为1时，Q与D保持一致；当C为0时，Q状态保持不变

**D触发器**：采用时钟边沿触发机制，由两个D锁存器依主从结构构成

**建立时间(setup time)**：在时钟触发边沿到来之前输入端D必须稳定的最短时间

**保持时间(hold time)**：在时钟触发边沿到来之后输入端必须保持不变的最短时间

**锁存延迟(latch prop or Clk-to-Q time)**：时钟触发边沿到来之后输入端Q改变为D的当前输入值的时间

**带使能端的D触发器**：En为1时，和D触发器功能相同；En为0时，保持原来状态不变

**带复位功能的D触发器**：Rst信号为1时，Q为0

**T触发器**：每个时钟脉冲的出发边沿到来后都会改变状态，可用D触发器实现，冲用于实现分频器或计数器功能



## 3 同步时序电路设计

需求分析、状态图/状态表设计、状态化简、状态编码、电路设计、电路分析

**状态图/状态表**：考虑现态、输入和次态、输出之间的关系；具有互斥性(从每个状态出发的所有状态的转换条件是互斥的)和完备性(从每个状态出发的所有状态的转换条件的逻辑值或等于1)

**状态化简**：将等价状态合并，以达到减少状态个数的目的；等价指的是两个状态在所有的输入情况下，输出都相同，次态都相同或等价

**状态编码**：假定一个有限状态机的状态数为N，则状态数M必须满足2^M >= N；M为=位编码中的每一位对应一个状态变量，每个状态变量的次态都是关于输入变量和所有状态变量的逻辑函数，即激励函数



## 4 典型时序逻辑部件设计

### 4.1 计数器

**行波计数器(ripple counter)**：串行计数器，采用多个T触发器串联实现，慢，本质上是一个异步时序逻辑。

**并行计数器**：使用带使能端的T触发器构成，基本原理是只有当低位都是1时，本位才会在下一次时钟到来时变化，本质上是一个同步时序逻辑

**寄存器**：用来暂存信息的逻辑部件，由若干个D触发器并行构成

**寄存器堆(register file)/通用寄存器组(General Purpose Register set, GPRs)**：暂存指令执行过程中用到的中间数据

**移位寄存器**：由若干个D触发器串行构成，串行输入，串行/并行输出

**桶形移位寄存器**：可以根据移位位数控制端的设置对数据左移或右移指定位数，是一种组合逻辑，需要指明算术移位还是逻辑移位

















